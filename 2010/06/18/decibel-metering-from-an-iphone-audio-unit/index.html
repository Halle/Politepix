<!DOCTYPE html>
<html lang="en-US">
<head>

<meta charset="UTF-8">

<title>Decibel metering from an iPhone audio unit | Politepix</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://www.politepix.com/wp-content/uploads/omgf/omgf-stylesheet-56/omgf-stylesheet-56.css?ver=1668781124" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="https://www.politepix.com/wp-content/themes/politepix-pixelpress-child-theme/style.css" media="screen">

<link rel="pingback" href="/xmlrpc.php">
<meta name="robots" content="max-image-preview:large">
<script>window._wca = window._wca || [];</script>

<link rel="alternate" type="application/rss+xml" title="Politepix &raquo; Feed" href="http://feeds.feedburner.com/politepixblog">
<link rel="alternate" type="application/rss+xml" title="Politepix &raquo; Comments Feed" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Politepix &raquo; Decibel metering from an iPhone audio unit Comments Feed" href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/feed/">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.5.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"ðŸ³ï¸â€âš§ï¸","ðŸ³ï¸â€‹âš§ï¸")?!1:!n(e,"ðŸ‡ºðŸ‡³","ðŸ‡ºâ€‹ðŸ‡³")&&!n(e,"ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿","ðŸ´â€‹ó §â€‹ó ¢â€‹ó ¥â€‹ó ®â€‹ó §â€‹ó ¿");case"emoji":return!n(e,"ðŸ¦â€â¬›","ðŸ¦â€‹â¬›")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<link rel="stylesheet" id="woo-layout-css" href="https://www.politepix.com/wp-content/themes/pixelpress/css/layout.css?ver=6.5.2" type="text/css" media="all">
<link rel="stylesheet" id="woocommerce-css" href="https://www.politepix.com/wp-content/themes/pixelpress/css/woocommerce.css?ver=6.5.2" type="text/css" media="all">
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="https://c0.wp.com/c/6.5.2/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all">
<style id="wp-block-library-inline-css" type="text/css">.has-text-align-justify{text-align:justify;}</style>
<link rel="stylesheet" id="mediaelement-css" href="https://c0.wp.com/c/6.5.2/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="https://c0.wp.com/c/6.5.2/wp-includes/js/mediaelement/wp-mediaelement.min.css" type="text/css" media="all">
<style id="jetpack-sharing-buttons-style-inline-css" type="text/css">.jetpack-sharing-buttons__services-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:0;list-style-type:none;margin:5px;padding:0}.jetpack-sharing-buttons__services-list.has-small-icon-size{font-size:12px}.jetpack-sharing-buttons__services-list.has-normal-icon-size{font-size:16px}.jetpack-sharing-buttons__services-list.has-large-icon-size{font-size:24px}.jetpack-sharing-buttons__services-list.has-huge-icon-size{font-size:36px}@media print{.jetpack-sharing-buttons__services-list{display:none!important}}.editor-styles-wrapper .wp-block-jetpack-sharing-buttons{gap:0;padding-inline-start:0}ul.jetpack-sharing-buttons__services-list.has-background{padding:1.25em 2.375em}</style>
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="bbp-default-css" href="https://www.politepix.com/wp-content/plugins/bbpress/templates/default/css/bbpress.min.css?ver=2.6.9" type="text/css" media="all">
<link rel="stylesheet" id="currency_converter_styles-css" href="https://www.politepix.com/wp-content/plugins/woocommerce-currency-converter-widget/assets/css/converter.css?ver=2.2.2" type="text/css" media="all">
<style id="woocommerce-inline-inline-css" type="text/css">.woocommerce form .form-row .required { visibility: visible; }</style>
<link rel="stylesheet" id="cmplz-general-css" href="https://www.politepix.com/wp-content/plugins/complianz-gdpr/assets/css/cookieblocker.min.css?ver=1710283454" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://c0.wp.com/p/jetpack/13.3.1/css/jetpack.css" type="text/css" media="all">
<link rel="stylesheet" id="prettyPhoto-css" href="https://www.politepix.com/wp-content/themes/pixelpress/includes/css/prettyPhoto.css?ver=6.5.2" type="text/css" media="all">
<script type="text/template" id="tmpl-variation-template">
	<div class="woocommerce-variation-description">{{{ data.variation.variation_description }}}<\/div>
	<div class="woocommerce-variation-price">{{{ data.variation.price_html }}}<\/div>
	<div class="woocommerce-variation-availability">{{{ data.variation.availability_html }}}<\/div>
</script>
<script type="text/template" id="tmpl-unavailable-variation-template">
	<p>Sorry, this product is unavailable. Please choose a different combination.<\/p>
</script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/dist/vendor/wp-polyfill-inert.min.js" id="wp-polyfill-inert-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/dist/vendor/regenerator-runtime.min.js" id="regenerator-runtime-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/dist/vendor/wp-polyfill.min.js" id="wp-polyfill-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/dist/hooks.min.js" id="wp-hooks-js"></script>
<script data-service="jetpack-statistics" data-category="statistics" type="text/plain" data-cmplz-src="https://stats.wp.com/w.js?ver=202417" id="woo-tracks-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/jquery/jquery.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/jquery/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/underscore.min.js" id="underscore-js"></script>
<script type="text/javascript" id="wp-util-js-extra">
/* <![CDATA[ */
var _wpUtilSettings = {"ajax":{"url":"\/wp-admin\/admin-ajax.php"}};
/* ]]> */
</script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/wp-util.min.js" id="wp-util-js"></script>
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/jquery-blockui/jquery.blockUI.min.js" id="jquery-blockui-js" defer data-wp-strategy="defer"></script>
<script type="text/javascript" id="wc-add-to-cart-variation-js-extra">
/* <![CDATA[ */
var wc_add_to_cart_variation_params = {"wc_ajax_url":"\/?wc-ajax=%%endpoint%%","i18n_no_matching_variations_text":"Sorry, no products matched your selection. Please choose a different combination.","i18n_make_a_selection_text":"Please select some product options before adding this product to your cart.","i18n_unavailable_text":"Sorry, this product is unavailable. Please choose a different combination."};
/* ]]> */
</script>
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/frontend/add-to-cart-variation.min.js" id="wc-add-to-cart-variation-js" defer data-wp-strategy="defer"></script>
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/jquery-cookie/jquery.cookie.min.js" id="jquery-cookie-js" defer data-wp-strategy="defer"></script>
<script data-service="jetpack-statistics" data-category="statistics" type="text/plain" data-cmplz-src="https://stats.wp.com/s-202417.js" id="woocommerce-analytics-js" defer data-wp-strategy="defer"></script>
<script type="text/javascript" src="https://www.politepix.com/wp-content/themes/pixelpress/includes/js/third-party.js?ver=6.5.2" id="third party-js"></script>
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/prettyPhoto/jquery.prettyPhoto.min.js" id="prettyPhoto-js" data-wp-strategy="defer"></script>
<script type="text/javascript" src="https://www.politepix.com/wp-content/themes/pixelpress/includes/js/general.js?ver=6.5.2" id="general-js"></script>
<script type="text/javascript" src="https://www.politepix.com/wp-content/themes/pixelpress/includes/js/uniform.js?ver=6.5.2" id="uniform-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/posts/477">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.5.2">
<meta name="generator" content="WooCommerce 8.8.2">
<link rel="canonical" href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/">
<link rel="shortlink" href="/?p=477">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2010%2F06%2F18%2Fdecibel-metering-from-an-iphone-audio-unit%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2010%2F06%2F18%2Fdecibel-metering-from-an-iphone-audio-unit%2F#038;format=xml">
	<style>img#wpstats{display:none}</style>
					<style>.cmplz-hidden {
					display: none !important;
				}</style>		<script>( function() {
				window.onpageshow = function( event ) {
					// Defined window.wpforms means that a form exists on a page.
					// If so and back/forward button has been clicked,
					// force reload a page to prevent the submit button state stuck.
					if ( typeof window.wpforms !== 'undefined' && event.persisted ) {
						window.location.reload();
					}
				};
			}() );</script>
		
<!-- Theme version -->
<meta name="generator" content="PixelPress Politepix 1.0">
<meta name="generator" content="PixelPress 1.5.4">
<meta name="generator" content="WooFramework 6.2.9">

<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<!--  Mobile viewport scale | Disable user zooming as the layout is optimised -->
<meta content="initial-scale=1.0; maximum-scale=1.0; user-scalable=no" name="viewport">
		<!--[if lt IE 9]>
			<script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
			<noscript><style>.woocommerce-product-gallery{ opacity: 1 !important; }</style></noscript>
	
<!-- Google Webfonts -->
<link href="https://www.politepix.com/wp-content/uploads/omgf/omgf-stylesheet-165/omgf-stylesheet-165.css?ver=1668781124" rel="stylesheet" type="text/css">

<!-- Alt Stylesheet -->
<link href="https://www.politepix.com/wp-content/themes/pixelpress/styles/default.css" rel="stylesheet" type="text/css">

<!-- Custom Favicon -->
<link rel="shortcut icon" href="https://www.politepix.com/wp-content/uploads/favicon.png">

<!-- Woo Shortcodes CSS -->
<link href="https://www.politepix.com/wp-content/themes/pixelpress/functions/css/shortcodes.css" rel="stylesheet" type="text/css">

<!-- Custom Stylesheet -->
<link href="https://www.politepix.com/wp-content/themes/pixelpress/custom.css" rel="stylesheet" type="text/css">

<!-- Custom Stylesheet In Child Theme -->
<link href="https://www.politepix.com/wp-content/themes/politepix-pixelpress-child-theme/custom.css" rel="stylesheet" type="text/css">

</head>

<body data-cmplz="1" class="post-template-default single single-post postid-477 single-format-standard theme-pixelpress woocommerce-no-js unknown alt-style-default has-lightbox layout-left-content">

<div id="wrapper">

	    
        
    <div id="header-wrap">

		<header id="header" class="col-full">
		
			<div id="logo" class="fl">
												    <a id="logo" href="/" title="iOS Frameworks for speech recognition, text to speech and more">
				    	<img src="https://www.politepix.com/wp-content/uploads/logo1.png" alt="Politepix">
				    </a>
			    			    
			    <hgroup>
			        
					<h1 class="site-title"><a href="/">Politepix</a></h1>
					<h2 class="site-description">iOS Frameworks for speech recognition, text to speech and more</h2>
					<h3 class="nav-toggle"><a href="#navigation">Navigation</a></h3>
				      	
				</hgroup>
			</div>
<!-- /#logo -->		
	        
	        	
	        <div id="header-right" class="fr">

				<nav id="navigation" role="navigation">
					
					<ul id="main-nav" class="nav fl">
<li id="menu-item-1175" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1175">
<a href="/openears/">OpenEars</a>
<ul class="sub-menu">
	<li id="menu-item-11108" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11108"><a href="/openears/tutorial/">OpenEars Tutorials</a></li>
	<li id="menu-item-1171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1171"><a href="/openears/support/">OpenEars FAQ/Support</a></li>
	<li id="menu-item-1189" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1189"><a href="/forums/forum/openearsforum/">OpenEars Support Forum</a></li>
	<li id="menu-item-14947" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14947"><a href="/openearsplatform/">About the OpenEars Platform</a></li>
</ul>
</li>
<li id="menu-item-11706" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-11706">
<a href="/neatspeech">NeatSpeech</a>
<ul class="sub-menu">
	<li id="menu-item-11707" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11707"><a href="/forums/forum/openears-plugins/">NeatSpeech support forum</a></li>
</ul>
</li>
<li id="menu-item-9871" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-9871">
<a href="/rapidears/">RapidEars</a>
<ul class="sub-menu">
	<li id="menu-item-10389" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10389"><a href="/forums/forum/openears-plugins">RapidEars Support Forum</a></li>
</ul>
</li>
<li id="menu-item-11030" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-11030">
<a href="/rejecto/">Rejecto</a>
<ul class="sub-menu">
	<li id="menu-item-11031" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11031"><a href="/forums/forum/openears-plugins/">Rejecto Support Forum</a></li>
</ul>
</li>
<li id="menu-item-13071" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13071"><a href="/savethatwave/">SaveThatWave</a></li>
<li id="menu-item-1021000" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1021000">
<a href="/ruleorama/">RuleORama</a>
<ul class="sub-menu">
	<li id="menu-item-9002" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9002"><a href="/forums/forum/openears-plugins/">RuleORama Free Support Forum</a></li>
</ul>
</li>
<li id="menu-item-1178" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-1178"><a title="Blog" href="/blog/">Blog</a></li>
<li id="menu-item-1015870" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1015870">
<a href="/shop">Shop</a>
<ul class="sub-menu">
	<li id="menu-item-8499" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8499"><a href="/shop">View all products</a></li>
	<li id="menu-item-8486" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8486"><a href="/cart/">Cart</a></li>
	<li id="menu-item-8498" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8498"><a href="/order-tracking/">Track your order</a></li>
	<li id="menu-item-8539" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8539"><a href="/termsandconditions/">AGB/Terms and Conditions</a></li>
</ul>
</li>
</ul>			        
			        			        <ul class="mini-cart">
						<li>
							<a href="/cart/" title="View your shopping cart" class="cart-parent">
								<span> 
							<span class="woocommerce-Price-amount amount"><bdi><span class="woocommerce-Price-currencySymbol">&euro;</span>0.00</bdi></span><mark>0</mark>							</span>
							</a>
							<ul class="cart_list"><li class="empty">No products in the cart.</li></ul>						</li>
					</ul>
			      				      	
				</nav><!-- /#navigation -->

				
<div id="header-social" class="social fr">
				<a href="http://feeds.feedburner.com/politepixblog" class="subscribe" title="RSS"></a>

				<a href="http://www.twitter.com/politepix" class="twitter" title="Follow me on Twitter"></a>

		</div>
<!-- /.social -->
				

			</div>
<!-- /#header-right -->
			
					
		</header><!-- /#header -->
	
	</div>
<!-- /#header-wrap -->
	
	
	       
    <div id="content" class="col-full">
    
    		
		<section class="section-title blog">
	
		<h1>Our Flying Friends</h1>
		<p><span>Halle's latest posts</span></p>		
	</section><!-- #section-title -->
	
    	
		<section id="main" class="col-left">
		           
        			<article class="post-477 post type-post status-publish format-standard hentry category-code tag-amplitude tag-audio-unit tag-audioqueue tag-audiounit tag-buffer tag-cocoa tag-core-audio tag-coreaudio tag-decibel tag-iphone-sdk tag-linkedin tag-metering tag-objective-c tag-remoteio">

				                
                <header>
                
	                <h1>Decibel metering from an iPhone audio unit</h1>
                	<aside class="post-meta">
	<ul>
		<li class="post-author">
			<span class="small">Posted by</span>
			<a href="/author/halle-2/" title="Posts by Halle Winkler" rel="author">Halle Winkler</a>		</li>
		<li class="post-comments">
			<span class="small"> | </span>
			<span class="comments"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comments">54 Comments</a></span>
		</li>
		<li class="post-category">
			<span class="small">Categories: </span>
			<a href="/category/code/" rel="category tag">Code</a>		</li>
			</ul>
</aside>
<div class="date-badge">
	<span class="month-day">18</span>
	<span class="month-name">June</span>
</div>
<!-- .date-badge -->
                	
                </header>
                
                <section class="entry fix">
                	<div class="woo-sc-box  note   full">
<h3 class="heading">Hello visitor!</h3>
<p>If Core Audio and iOS development is your cup of tea, you might also want to check out <a href="/openears">OpenEars</a>, Politepix&#8217;s shared source library for continuous speech recognition and text-to-speech for iPhone and iPad development. It even <a href="/2014/04/10/openears-1-7-introducing-dynamic-grammar-generation/">has an API for defining rules-based recognition grammars dynamically as of version 1.7</a> â€“ pretty neat! On to decibel metering:</p>
</div>
<p><a href="#decibels">[Take me right to the code please!]</a> There are three levels of abstraction for audio on the iPhone, with the <a title="AVAudio Class Reference" href="https://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html" target="_self">AVAudioPlayer</a> as the easiest to use (great for 75% of cases) but with the least fine control and highest latency, then <a title="Audio Queue Services Reference" href="https://developer.apple.com/mac/library/documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html">Audio Queue Services</a> as the middle step, with less latency and a callback where you can do a lot of useful stuff, and then at the lowest level there are two types of <a title="Tom Bolstad's Core Audio Tutorial" href="https://timbolstad.com/2010/03/14/core-audio-getting-started/">Audio</a> <a title="A Tasty Pixel Remote I/O info" href="https://atastypixel.com/blog/using-remoteio-audio-unit/">Unit</a>: <a title="Subfurther Remote I/O Brain Dump" href="https://www.subfurther.com/blog/?p=507">Remote I/O (or remoteio)</a> and the <a title="Core Audio Documentation" href="https://developer.apple.com/iphone/library/documentation/AudioUnit/Reference/AUComponentServicesReference/Reference/reference.html#//apple_ref/doc/c_ref/kAudioUnitSubType_VoiceProcessingIO">Voice Processing Audio Unit subtype</a>.</p>
<p>Audio Units are a little bit less forgiving than Audio Queues in their setup, and they have a few more low-level settings that need to be accounted for, and they are a little less documented than Audio Queues, and their sample code on the developer site (Auriotouch) is a little less transparent than the one for Audio Queues (SpeakHere), all of which has led to the impression that they are ultra-difficult and should be approached with caution, although in practice the code is almost identical to that for Audio Queues if you aren&#8217;t mixing sounds and have a single callback.Â At least, I&#8217;ve spent as much time being mystified by a non-working Audio Queue as by a non-working Audio Unit on the iPhone. But it needs to be said that the main reason that Audio Units aren&#8217;t much harder than Audio Queues at this point is because a lot of independent developers have put a lot of time into experimenting, asking questions, and publishing their results. A year ago they were much more of a black box.</p>
<p>The decision process on which technology to use is something like:</p>
<p>Q. Are any of the following statements true: &#8220;I need the lowest possible latency&#8221;, &#8220;I need to work with network streams of audio or audio in memory&#8221;, &#8220;I need to do signal processing&#8221;, &#8220;I need to record voice with maximum clarity&#8221;<br>
A. If yes, Audio Units are probably best. If no,<br>
Q. With the answers to the previous questions being no, do you still need to be able to work with sound at the buffer level?<br>
A: If yes, use Audio Queues or Audio Units, whichever is more comfortable. If no, use AVAudioPlayer/AVAudioRecorder.</p>
<p>In my experience there is just one big downside to the Audio Unit on the iPhone, which is that there is no metering property for it. There is a metering property which you can see in the audio unit properties header and in the iPhone Audio Units docs, but it isn&#8217;t really turned on, and you can lose a lot of time discovering this via experimentation. So, if you&#8217;ve chosen to use Audio Units and your implementation is working, you have a render callback function. This is where you can meter your samples. I have only written/tested this for 16-bit mono PCM data so if you are using something else, adaptations might be required.</p>
<p>To meter the samples in the render callback requires six steps.</p>
<p>Step 1: get an array of your samples that you can loop through. Each sample contains the amplitude.<br>
Step 2: for each sample, get its amplitude&#8217;s absolute value.<br>
Step 3: for each sample&#8217;s absolute value, run it through a simple low-pass filter,<br>
Step 4: for each sample&#8217;s filtered absolute value, convert it into decibels,<br>
Step 5: for each sample&#8217;s filtered absolute value in decibels, add an offset value that normalizes the clipping point of the device to zero.<br>
Step 6: keep the highest value you find.</p>
<p>That end value will be more or less the same thing you&#8217;d get when using the metering property for an Audio Queue or AVAudioRecorder/AVAudioPlayer.</p>
<p>[politepix-blog-inline-text-ad]</p>
<p>Now, the actual code:</p>
<pre style="width:900px;">	
static OSStatus	AudioUnitRenderCallback (void *inRefCon,
        AudioUnitRenderActionFlags *ioActionFlags,
        const AudioTimeStamp *inTimeStamp,
        UInt32 inBusNumber,
        UInt32 inNumberFrames,
        AudioBufferList *ioData) {

		OSStatus err = AudioUnitRender(audioUnitWrapper-&gt;audioUnit, 
                                               ioActionFlags, 
                                               inTimeStamp,  
                                               1, 
                                               inNumberFrames, 
                                               ioData);

		if(err != 0) NSLog(@"AudioUnitRender status is %d", err);
		// These values should be in a more conventional location 
                //for a bunch of preprocessor defines in your real code
#define DBOFFSET -74.0 
		// DBOFFSET is An offset that will be used to normalize 
                // the decibels to a maximum of zero.
		// This is an estimate, you can do your own or construct 
                // an experiment to find the right value
#define LOWPASSFILTERTIMESLICE .001 
		// LOWPASSFILTERTIMESLICE is part of the low pass filter 
                // and should be a small positive value

		SInt16* samples = (SInt16*)(ioData-&gt;mBuffers[0].mData); // Step 1: get an array of 
                // your samples that you can loop through. Each sample contains the amplitude.

		Float32 decibels = DBOFFSET; // When we have no signal we'll leave this on the lowest setting
		Float32 currentFilteredValueOfSampleAmplitude, previousFilteredValueOfSampleAmplitude; // We'll need 
                                                                                     // these in the low-pass filter
		
                Float32 peakValue = DBOFFSET; // We'll end up storing the peak value here

		for (int i=0; i &lt; inNumberFrames; i++) { 

			Float32 absoluteValueOfSampleAmplitude = abs(samples[i]); //Step 2: for each sample, 
                                                                      // get its amplitude's absolute value.

			// Step 3: for each sample's absolute value, run it through a simple low-pass filter
			// Begin low-pass filter
			currentFilteredValueOfSampleAmplitude = LOWPASSFILTERTIMESLICE * absoluteValueOfSampleAmplitude + (1.0 - LOWPASSFILTERTIMESLICE) * previousFilteredValueOfSampleAmplitude;
			previousFilteredValueOfSampleAmplitude = currentFilteredValueOfSampleAmplitude;
			Float32 amplitudeToConvertToDB = currentFilteredValueOfSampleAmplitude;
			// End low-pass filter

			Float32 sampleDB = 20.0*log10(amplitudeToConvertToDB) + DBOFFSET; 
			// Step 4: for each sample's filtered absolute value, convert it into decibels
			// Step 5: for each sample's filtered absolute value in decibels, 
                        // add an offset value that normalizes the clipping point of the device to zero.

			if((sampleDB == sampleDB) &amp;&amp; (sampleDB != -DBL_MAX)) { // if it's a rational number and 
                                                                                       // isn't infinite

				if(sampleDB &gt; peakValue) peakValue = sampleDB; // Step 6: keep the highest value 
                                                                                  // you find.
				decibels = peakValue; // final value
			}
		}

		NSLog(@"decibel level is %f", decibels);

		for (UInt32 i=0; i &lt; ioData-&gt;mNumberBuffers; i++) { // This is only if you need to silence 
                                                                          // the output of the audio unit
			memset(ioData-&gt;mBuffers[i].mData, 0, ioData-&gt;mBuffers[i].mDataByteSize); // Delete if you 
                                                                                  // need audio output as well as input
		}

		return err;
	}
}</pre>
<p>That should give you a metered decibel value which is analogous to the output of the metering property for an Audio Queue. If anyone has any corrections to this or comments I hope they&#8217;ll get in touch.</p>
<p>My starting point for learning this technique was a helpful response email from iWillApps&#8217; Will to a silly question I had which got me on track analyzing the actual samples, and <a href="https://ccrma.stanford.edu/~jos/st/DB_Display.html">this page</a> where the math behind displaying DB is broken down pretty thoroughly, and <a href="https://stackoverflow.com/questions/2167513/iphone-how-to-measure-amplitude-of-a-pcm-coded-signal">this post</a> on Stack Overflow which explains that the process needs to be done on a rectified signal and has the low-pass filter code example.</p>
									</section>
									
				<p class="tags">Tags: <a href="/tag/amplitude/" rel="tag">amplitude</a>, <a href="/tag/audio-unit/" rel="tag">audio unit</a>, <a href="/tag/audioqueue/" rel="tag">audioqueue</a>, <a href="/tag/audiounit/" rel="tag">audiounit</a>, <a href="/tag/buffer/" rel="tag">buffer</a>, <a href="/tag/cocoa/" rel="tag">cocoa</a>, <a href="/tag/core-audio/" rel="tag">core audio</a>, <a href="/tag/coreaudio/" rel="tag">coreaudio</a>, <a href="/tag/decibel/" rel="tag">decibel</a>, <a href="/tag/iphone-sdk/" rel="tag">iphone sdk</a>, <a href="/tag/linkedin/" rel="tag">linkedin</a>, <a href="/tag/metering/" rel="tag">metering</a>, <a href="/tag/objective-c/" rel="tag">objective-c</a>, <a href="/tag/remoteio/" rel="tag">remoteio</a></p>                                
            </article><!-- .post -->

								<aside id="post-author" class="fix">
					<div class="profile-image"></div>
					<div class="profile-content">
						<h3 class="title">About Halle Winkler</h3>
						I'm the developer and designer of the Politepix apps and OpenEars.						<div class="profile-link">
							<a href="/author/halle-2/">
								View all posts by Halle Winkler <span class="meta-nav">&rarr;</span>							</a>
						</div>
<!-- #profile-link	-->
					</div>
<!-- .post-entries -->
				</aside><!-- .post-author-box -->
				
				
			<aside id="connect" class="fix">
		<h3>Subscribe and Connect</h3>

		<div class="col-left">
			<p>Sign up for the Politepix OpenEars frameworks mailing list here in order to receive infrequent notifications of when OpenEars frameworks (such as RapidEars and Rejecto) are updated and when they go on sale. We also occasionally have sales which are for mailing list subscribers only, so it's beneficial to sign up. We will not send you mail frequently, and you can easily unsubscribe any time you like. We do not share email addresses with anyone.</p>
			
						<!-- Begin MailChimp Signup Form -->
			<div id="mc_embed_signup">
				<form class="newsletter-form" action="http://us5.list-manage.com/subscribe/post?u=33b7daacfafad6be57962fd92&id=702c1f66db" method="post" target="popupwindow" onsubmit="window.open('http://us5.list-manage.com/subscribe/post?u=33b7daacfafad6be57962fd92&id=702c1f66db', 'popupwindow', 'scrollbars=yes,width=650,height=520');return true">
					<input type="text" name="EMAIL" class="required email" value="E-mail" id="mce-EMAIL" onfocus="if (this.value == 'E-mail') {this.value = '';}" onblur="if (this.value == '') {this.value = 'E-mail';}">
					<input type="submit" value="Submit" name="subscribe" id="mc-embedded-subscribe" class="btn submit button">
				</form>
			</div>
			<!--End mc_embed_signup-->
			
						<div class="social">
		   				   		<a href="http://feeds.feedburner.com/politepixblog" class="subscribe" title="RSS"></a>

		   				   		<a href="http://www.twitter.com/politepix" class="twitter" title="Twitter"></a>

		   					</div>
			
		</div>
<!-- col-left -->

				<div class="related-posts col-right">
			<h4>Related Posts:</h4>
			<div class="woo-sc-related-posts">
<ul>
<li class="post-id-1028719">

<a href="/2016/02/22/openears-2-5-and-all-plugins-out-now/" title="OpenEars 2.5 and all plugins out now!" class="related-title"><span>OpenEars 2.5 and all plugins out now!</span></a>
</li>
<li class="post-id-1025719">

<a href="/2015/05/10/openears-2-04-and-compatibility-versions-of-all-plugins-out-now/" title="OpenEars 2.04 and compatibility versions of all plugins out now, with no more uppercase requirements" class="related-title"><span>OpenEars 2.04 and compatibility versions of all plugins out now, with no more uppercase requirements</span></a>
</li>
<li class="post-id-1017496">

<a href="/2013/06/14/openears-1-3-0-out-now-with-pocketsphinx-and-sphinxbase-8/" title="OpenEars 1.3.0 out now with Pocketsphinx and Sphinxbase .8" class="related-title"><span>OpenEars 1.3.0 out now with Pocketsphinx and Sphinxbase .8</span></a>
</li>
<li class="post-id-11714">

<a href="/2012/10/25/openears-1-2-3-and-neatspeech-1-0/" title="OpenEars 1.2.3 and NeatSpeech 1.0!" class="related-title"><span>OpenEars 1.2.3 and NeatSpeech 1.0!</span></a>
</li>
<li class="post-id-11204">

<a href="/2012/09/20/openears-1-2-1-rapidears-1-1-rejecto-1-0/" title="OpenEars 1.2.1, RapidEars 1.1, Rejecto 1.0" class="related-title"><span>OpenEars 1.2.1, RapidEars 1.1, Rejecto 1.0</span></a>
</li>
</ul>
<div class="fix"></div>
<!--/.fix-->
</div>
<!--/.woo-sc-related-posts-->		</div>
<!-- col-right -->
		
	</aside>
	
	        <nav id="post-entries" class="fix">
	            <div class="nav-prev fl"><a href="/2010/03/29/who-is-on-the-balcony-springtime-addendum/" rel="prev"><span class="meta-nav">&larr;</span> Who is on the balcony, springtime addendum</a></div>
	            <div class="nav-next fr"><a href="/2010/06/19/who-is-on-the-balcony-flying-swan-edition/" rel="next">Who is on the balcony, flying swan edition <span class="meta-nav">&rarr;</span></a></div>
	        </nav><!-- #post-entries -->
            

<!-- You can start editing here. -->


<div id="comments">

			<h3>54 Responses to &#8220;Decibel metering from an iPhone audio unit&#8221;</h3>

		<ol class="commentlist">
	
				                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-68"></a>
	      	
	      	<div id="li-comment-68" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-68">

			   		<div class="comment-head">
			      	            
		                <span class="name">K-Boy</span>           
		                <span class="date">July 31, 2010 at 5:32 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-68" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>i don&#8217;t understand this code.</p>
<p>OSStatus err = AudioUnitRender(audioUnitWrapper-&gt;audioUnit, ioActionFlags, inTimeStamp, 1, inNumberFrames, ioData);</p>
<p>so, What is &#8216;audioUnitWrapper&#8217;?</p>
<p>audioUnitWrappe is error my code.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-69"></a>
	      	
	      	<div id="li-comment-69" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-69">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">July 31, 2010 at 8:10 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-69" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi K-Boy,</p>
<p>Thanks for pointing that out.  When I work with Audio Units on the iPhone I use a C++ struct containing the elements I&#8217;m going to need to access such as the AudioUnit and the CAStreamBasicDescription for the input/output formats, etc. in this case, audioUnitWrapper is the name of the struct, and audioUnit is the actual Audio Unit that is being metered.  So, audioUnitWrapper->audioUnit can just be replaced with the name of your Audio Unit object, however you&#8217;ve defined it.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-70"></a>
	      	
	      	<div id="li-comment-70" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-70">

			   		<div class="comment-head">
			      	            
		                <span class="name">K-Boy</span>           
		                <span class="date">August 2, 2010 at 5:59 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-70" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Excuse me.<br>
I&#8217;ve read your posts.<br>
Thanks to your posts as I think a lot of help.</p>
<p>so i don&#8217;t understand your code.<br>
Why did you use the Low-Pass-Filter??</p>
<p>I want to get positive decibel number.<br>
however your code got a negative decibel number.</p>
<p>so why does you decrease the amplitudeToConvertToDB??</p>
<p>Please Your Comment.</p>
<p>Thank you.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-71"></a>
	      	
	      	<div id="li-comment-71" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-71">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">August 2, 2010 at 6:30 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-71" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi K-Boy,</p>
<p>Good question.  The low-pass filter smooths the displayed amplitude so that you get a readout that would be similar to a VU meter on a piece of audio equipment, which is the kind of shift of the amplitude value over time that we&#8217;re used to seeing in audio metering.  You can try leaving it out to see what it does &#8211; the values are pretty jittery and the reaction of a UI element displaying the values is going to be fairly erratic.</p>
<p>The negative decibel number is a particular convention for displaying power &#8212; it shows decibel values as a value below zero, where zero is the clipping point (point of distortion) for the recording device.   You&#8217;ll see this approach on professional recording devices, and it is also the way that metering works for iPhone Audio Queues, which this code is intended to emulate.  </p>
<p>So, the negative decibel values are not absolute decibel values that show the sound pressure level in the environment; instead they show how many more decibels of sound pressure are possible before the recording device starts to distort (-40dB means that if there were another 40dB, the mic would clip).  Unfortunately, I don&#8217;t happen to know the absolute clipping point for the iPhone mic so my constant of -74.0 is an estimate.</p>
<p>If you want positive decibel values you could define DBOFFSET as 0.0 instead of -74.0.  Let me know if that works for you.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-120"></a>
	      	
	      	<div id="li-comment-120" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-120">

			   		<div class="comment-head">
			      	            
		                <span class="name">DeoKaushal</span>           
		                <span class="date">August 25, 2010 at 4:36 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-120" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle<br>
Thanks for this post which help me lot for developing the db Meter in iPhone.<br>
Please suggest me some code from which i can made a RTA Analyser ..</p>
<p>Thanks..</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-122"></a>
	      	
	      	<div id="li-comment-122" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-122">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">August 25, 2010 at 8:41 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-122" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi DeoKaushal,</p>
<p>I&#8217;m glad you found it helpful &#8212; have you checked out the AurioTouch example from Apple?  It should get you pretty far with writing an RTA.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-125"></a>
	      	
	      	<div id="li-comment-125" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-125">

			   		<div class="comment-head">
			      	            
		                <span class="name">K-boy</span>           
		                <span class="date">August 25, 2010 at 3:06 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-125" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle.<br>
i have got another question again.</p>
<p>So, i want to appear  dB value on the screen of the iphone(Label)</p>
<p>However, I didn&#8217;t.<br>
Do you know this way??</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-126"></a>
	      	
	      	<div id="li-comment-126" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-126">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">August 25, 2010 at 3:33 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-126" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi K-boy,</p>
<p>First question is whether the logging of the values that is in the code example is working for you.  Do you see the values logged when you&#8217;re running the code?  If so, and everything is therefore working as expected, my guess for the reason you aren&#8217;t seeing a UILabel update as expected is that you are probably running this code on your main thread, which is the UI thread on the iPhone (so the audio unit code might be blocking the UI from updating).  </p>
<p>I&#8217;m a little hesitant to give advice on threading on the iPhone since the recommended technique has just changed and the thread management approach I&#8217;m most familiar with is the old way of doing it with NSThread, so if this is the issue, I think it&#8217;s best for you to check out the Concurrency programming guide from Apple so you&#8217;ll be up to date on the most current approach: <a href="http://developer.apple.com/mac/library/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html" rel="nofollow ugc">http://developer.apple.com/mac/library/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html</a></p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-154"></a>
	      	
	      	<div id="li-comment-154" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-154">

			   		<div class="comment-head">
			      	            
		                <span class="name">DeoKaushal</span>           
		                <span class="date">August 31, 2010 at 5:55 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-154" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle</p>
<p>Thanks for your quick response.<br>
I come through AurioTouch example from Apple, but this code is doing processing on the basis of FFT but i wanted to an RTA on octave and 1/3 octave parameters, Not on FFT.</p>
<p>Do you Know any way to get this ??</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-156"></a>
	      	
	      	<div id="li-comment-156" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-156">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">August 31, 2010 at 9:32 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-156" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi DeoKaushal,</p>
<p>I don&#8217;t know a place for you to see existing C or C++ code for RTA offhand, but you could check out the archives of Apple&#8217;s Core Audio API mailing list to see if someone has had the same question:</p>
<p><a href="http://lists.apple.com/archives/Coreaudio-api" rel="nofollow ugc">http://lists.apple.com/archives/Coreaudio-api</a></p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-228"></a>
	      	
	      	<div id="li-comment-228" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-228">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="http://kaudiosolutions.com/" class="url url" rel="ugc external nofollow">Corey</a></span>           
		                <span class="date">September 18, 2010 at 6:37 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-228" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Right now i&#8217;m working with some code that uses a playbackCallback from the RemoteIO unit and sets the buffer for playback (to be sent directly to hardware) from the concurrent packets of an audio-file on disk that has been loaded into memory.</p>
<p>The code uses AudioFileReadPackets and the AudioBuffer-&gt;mData is UInt32 for some reason. If I try changing it, the sound gets all screwed up.</p>
<p>Long story short, how does using a UInt32 for Wave File PCM data change the algorithms above? Will it still work?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-229"></a>
	      	
	      	<div id="li-comment-229" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-229">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">September 18, 2010 at 9:18 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-229" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Corey,</p>
<p>I think it should be the same other than obtaining the samples, but I&#8217;ll be interested in knowing your results.  Give it a try by changing the line:</p>
<p>SInt16* samples = (SInt16*)(ioData->mBuffers[0].mData);</p>
<p>to </p>
<p>UInt32* samples = (UInt32*)(ioData->mBuffers[0].mData);</p>
<p>-Halle</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-230"></a>
	      	
	      	<div id="li-comment-230" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-230">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="http://kaudiosolutions.com/" class="url url" rel="ugc external nofollow">Corey</a></span>           
		                <span class="date">September 18, 2010 at 2:09 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-230" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>I tried the code. Do you by any chance know what UInt32 is doing for me? I&#8217;m used to using Float32&#8217;s where my samples are all from -1 and 1&#8230; where a waveform is easy to draw, decibel metering is just finding an average of the absolute value of these values scaled up to 1 being 0db.</p>
<p>After implementing your code, I&#8217;m getting positive values that go from about 40 to 105.  Any thoughts? I implemented a simple UIView with a green background and had it draw itself at a width in ratio to the DB value i&#8217;m getting and (though it gets jittery a tiny bit) it seems to hit on peaks&#8230; I just don&#8217;t know the accuracy or even understand the point of UInt32 as a sample structure. </p>
<p>If I print out the raw UInt32 numbers, I get numbers as big as 3557007849. What does this mean in relation to the -1, 0, 1 relationship i&#8217;m used to seeing?</p>
<p>THanks! Kudos for your code.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-232"></a>
	      	
	      	<div id="li-comment-232" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-232">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">September 18, 2010 at 4:41 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-232" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Corey,</p>
<p>What is basically going on here is that there is a pointer to an array of 16-bit integers (SInt16* samples), that is full of the individual 16-bit samples that we are analyzing from the buffer. So one SInt16 out of this array is a single sample with signed 16-bit sample data in it.  </p>
<p>A sample is itself a measure of amplitude since a DAC works by measuring the amplitude of an incoming sound wave however many times a second until it has enough data for a smooth rendering of the wave. The data that is stored to a single one of those samples is the height or depth of the wave at that moment in time. Since the sample has to describe the amplitude of a peak or a trough of a wave, a signed integer is going to put the midpoint at zero, where a negative value will describe a point on a trough and a positive value will describe a point on a peak. The values that are possible to store in a signed 16-bit integer are âˆ’32768 to 32767 so those are the maximum ranges possible above and below zero. I&#8217;m guessing that in the case of an unsigned sample, the midpoint would need to be the value that is half the largest value that can be stored in the sample, so if I&#8217;m correct the value range of your unsigned 32-bit sample would be 0 to 4,294,967,295 (the maximum value which can be stored in a UInt32) with a midpoint of 2,147,483,647.  Below 2,147,483,647 represents a point on a trough and above it a point on a peak.</p>
<p>When you ask:</p>
<p>> If I print out the raw UInt32 numbers, I get numbers as big as 3557007849.<br>
> What does this mean in relation to the -1, 0, 1 relationship iâ€™m used to seeing?</p>
<p>I haven&#8217;t worked with arrays of Float32 samples but I&#8217;ve heard they are used in some audio formats for more precision, so I&#8217;m guessing that the answer to your question is just that you&#8217;re used to seeing arrays of Float32 samples that express wave amplitude on a scale of -1 to 1 with a midpoint of zero (probably with a ton of precision after the decimal point), and the UInt32 is expressing the same wave amplitude on a scale of zero to 4,294,967,295 with a midpoint (again, I&#8217;m guessing on this one) of 2,147,483,647. My decibel code attempts to express power as decibels on a scale of -n to zero because this is how Apple does it for Audio Queue services and I&#8217;m trying to make code that can work with the same UI whether it uses the built-in Audio Queue metering or this kind of Remote IO Audio Unit metering, so it is doing something different than describing wave amplitude over and under a midpoint (which is why we need to do some operations to the sample before we have that information).</p>
<p>On to why the code has unexpected results (sorry, I didn&#8217;t really think about the signing issue before answering previously) &#8211; the first thing we&#8217;re doing is getting an absolute value from the integer in which the midpoint is assumed to be zero, which isn&#8217;t a helpful thing to do to UInt32s because the values do not range from negative to positive values with a midpoint of zero. </p>
<p>What we could try instead is getting the absolute value of (samples[i] &#8211; 2147483647) instead of the absolute value of samples[i] by changing:</p>
<p>Float32 absoluteValueOfSampleAmplitude = abs(samples[i]);</p>
<p>to </p>
<p>Float64 absoluteValueOfSampleAmplitude = abs(samples[i] &#8211; 2147483647);</p>
<p>This should normalize the midpoint to zero before getting the absolute value. I think you might also need to change all or some of the Float32 variables to Float64 too. </p>
<p>There might be easier or more efficient ways to do this and an alternate approach might be evident to you as well so don&#8217;t hesitate to pitch in with ideas.  I don&#8217;t have an audio project around that is easily configurable to produce unsigned 32-bit samples so you&#8217;re going to need to test it out and get back to me &#8212; I&#8217;ll be interested to hear what you discover.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-233"></a>
	      	
	      	<div id="li-comment-233" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-233">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="http://kaudiosolutions.com/" class="url url" rel="ugc external nofollow">Corey</a></span>           
		                <span class="date">September 19, 2010 at 1:02 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-233" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>So.. after spending my whole Saturday afternoon trying to figure out how to read this UInt32&#8230; I finally realized that the reason it&#8217;s being passed directly to the RemoteIO unit as 32-bit instead of 16-bit is because it&#8217;s interleaving both left and right channels in the low/order bytes.</p>
<p>So I split the uint32 into 2 SInt16&#8217;s&#8230; and go figure, you&#8217;re algorithm works beautifully :-) the same as the AVAudioPlayer&#8230;</p>
<p>thanks much man. This has been quite a hard road i&#8217;ve taken trying to figure out this core audio stuff&#8230; i&#8217;m just glad there are great people like you around to help us out.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-236"></a>
	      	
	      	<div id="li-comment-236" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-236">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">September 19, 2010 at 11:04 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-236" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Ha, that&#8217;s really interesting, I was also wondering about why it was in a UInt32, so it&#8217;s nice that you&#8217;ve solved the mystery.  Glad it&#8217;s working for you!  Audio Units for iOS is definitely a challenging area of Core Audio, although it&#8217;s impressive how it performs on the device once you get it working.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-313"></a>
	      	
	      	<div id="li-comment-313" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-313">

			   		<div class="comment-head">
			      	            
		                <span class="name">James</span>           
		                <span class="date">October 12, 2010 at 12:21 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-313" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>I currently am working on a project where I&#8217;m attempting to retrieve audio file amplitudes. I created an AudioBufferList and then passed it to the samples variable you listed above&#8230; However each time I pass through the buffer data I get a different amplitude value.<br>
I&#8217;m new at using Core Audio so I may be doing this all wrong. The data I transfer into the AudioBufferList comes from a AudioBuffer which points to a casted void buffer. Also the audio coming into the buffer is opened, not streamed&#8230;<br>
Do these points make any difference?<br>
Do I need to run the audio through the AudioUnitRender prior to it working correctly?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-316"></a>
	      	
	      	<div id="li-comment-316" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-316">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">October 12, 2010 at 8:19 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-316" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi James,</p>
<p>Without seeing your code I donâ€™t have any advice, but getting different amplitude values would be expected. You do need to render the audio first as seen in the code example.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-497"></a>
	      	
	      	<div id="li-comment-497" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-497">

			   		<div class="comment-head">
			      	            
		                <span class="name">M</span>           
		                <span class="date">November 15, 2010 at 10:10 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-497" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>On this line: if(err != 0) NSLog(@&#8221;AudioUnitRender status is %d&#8221;, err);</p>
<p>I am getting a âˆ’50 error returned and a subsequent EXC_BAD_ACCESS crash on SInt16* samples = (SInt16*)(ioData-&gt;mBuffers[0].mData); </p>
<p>What could be wrong?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-498"></a>
	      	
	      	<div id="li-comment-498" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-498">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">November 16, 2010 at 8:07 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-498" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi M.,</p>
<p>Simulator or device?  The crash is probably because nothing rendered so the next step of casting the void sample data into SInt16s and looping through the number of frames goes past the array boundary.  </p>
<p>A -50 error on the device might mean that there is a bad parameter in your AudioUnitRender() call. Here is the definition of AudioUnitRender():</p>
<p>OSStatus AudioUnitRender (<br>
   AudioUnit                   inUnit,<br>
   AudioUnitRenderActionFlags  *ioActionFlags,<br>
   const AudioTimeStamp        *inTimeStamp,<br>
   UInt32                      inOutputBusNumber,<br>
   UInt32                      inNumberFrames,<br>
   AudioBufferList             *ioData<br>
);</p>
<p>Most of those get their data from the callback, so I&#8217;m guessing that a potential issue could be with inUnit or inOutputBusNumber.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-511"></a>
	      	
	      	<div id="li-comment-511" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-511">

			   		<div class="comment-head">
			      	            
		                <span class="name">ben</span>           
		                <span class="date">November 18, 2010 at 4:02 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-511" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>pretty sure that&#8217;s a highpass filter &#8211; check the frequency response</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-513"></a>
	      	
	      	<div id="li-comment-513" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-513">

			   		<div class="comment-head">
			      	            
		                <span class="name">M</span>           
		                <span class="date">November 18, 2010 at 2:09 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-513" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Thanks, it was just poor memory management on my part. Now I face a different issue. I have everything hooked up as working to return db&#8217;s. I have noticed that the range is quite low however, only returning about a 6 DB change. When I use your default values for DBOFFSET and LOWPASSFILTERTIMESLICE, I get results from âˆ’21 to âˆ’15 when testing by keeping silent in the room to test the lows and yelling into the iPhone to test the highs.  How can I increase the dynamic range here?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-514"></a>
	      	
	      	<div id="li-comment-514" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-514">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">November 18, 2010 at 2:33 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-514" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>What is the ASBD for your audio?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-547"></a>
	      	
	      	<div id="li-comment-547" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-547">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">November 27, 2010 at 3:01 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-547" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Ben,</p>
<p>Interesting, when I check the frequency response on the part (and solely that part) that is identified as the LP filter in the example I see the results I would expect to. But after the LP filter, a peak frequency is selected out of the smoothed results. You can read a lot more about that IIR low pass filter at the Stack Overflow discussion that is cited in the post as the origin of the filter.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-884"></a>
	      	
	      	<div id="li-comment-884" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-884">

			   		<div class="comment-head">
			      	            
		                <span class="name">Le Quang Vinh</span>           
		                <span class="date">February 3, 2011 at 8:03 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-884" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi halle ,<br>
but if i used to peakPowerForChannel and AveragePowerForChannel. How to return positive decibel values in screen (display for user) .I user this tutorial</p>
<p><a href="http://www.iphonedevsdk.com/forum/iphone-sdk-development/45813-mic-blow-detection-playing-sounds.html" rel="nofollow ugc">http://www.iphonedevsdk.com/forum/iphone-sdk-development/45813-mic-blow-detection-playing-sounds.html</a></p>
<p>but now in my screen device decibel value = -30 -&gt; 0 . Can you help me ? why value is equal -30 dB in silence room<br>
?<br>
Thanks so such !</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-886"></a>
	      	
	      	<div id="li-comment-886" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-886">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">February 3, 2011 at 10:17 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-886" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Le Quang Vinh,</p>
<p>This explanation for negative decibel values is from earlier on this page:</p>
<p><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/comment-page-1/#comment-71" rel="ugc">https://www.politepix.com/2010/06/18/decibel-metering-from-an-iphone-audio-unit/comment-page-1/#comment-71</a></p>
<p>This also has an explanation of how to show a positive number in my tutorial. I don&#8217;t know offhand how to show a positive number with someone else&#8217;s tutorial that I haven&#8217;t tried, but usually you will just see if you can identify the lowest-possible negative number and then add that same number as a positive number to the result you want to convert. -74 + 74 = 0, the quietest possible value. -30 + 74 = 44, a middle value. 0 + 74 = 74, the highest possible value before the mic distorts.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-1058"></a>
	      	
	      	<div id="li-comment-1058" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1058">

			   		<div class="comment-head">
			      	            
		                <span class="name">Le Quang Vinh</span>           
		                <span class="date">March 3, 2011 at 1:56 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1058" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle,<br>
NSLog(@&#8221;decibel level is %f&#8221;, decibels);<br>
 &#8220;decibels&#8221; is average value or peak value decibel<br>
Thanks so much !</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1073"></a>
	      	
	      	<div id="li-comment-1073" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1073">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">March 6, 2011 at 2:39 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1073" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Le Quang Vinh,</p>
<p>I believe it is peak since the highest value after the low-pass filter is selected. Without knowing how the AudioQueue value is derived, I don&#8217;t know for sure that this method results in the same value.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-1188"></a>
	      	
	      	<div id="li-comment-1188" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1188">

			   		<div class="comment-head">
			      	            
		                <span class="name">Frangible</span>           
		                <span class="date">April 1, 2011 at 10:33 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1188" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>You mention this code gives you about the same results as using metering.  Is this due to the low-pass filter code?</p>
<p>Right now I&#8217;m using AVAudioRecorder metering in a dumb little free app that computes counts per minute from the clicks of a Geiger counter.  It works fairly well with weakly radioactive things.</p>
<p>The problem is the peak level always sticks for 850ms, and though the avg level seems to recover faster, it&#8217;s not fast enough; increasing the timer polling from 30 Hz to 300 Hz doesn&#8217;t help.  With a 1200 CPM uranium ore sample I&#8217;m getting ~200 CPM max on an iPad with little CPU use.  At the very high end, on YouTube there are videos of CDV-700s getting 30K CPM readings from samples&#8230; I looked at the waveforms and yep, they really are 30K CPM, though it is difficult to tell.</p>
<p>Is the above metering code more responsive than Apple&#8217;s metering?  Do you have any suggestions on filtering that can go up to say, 30K CPM, but not peg the CPU or count a single click twice?</p>
<p>Thanks for sharing this code though, it&#8217;s the closest example I&#8217;ve found for what I&#8217;m trying to do.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1189"></a>
	      	
	      	<div id="li-comment-1189" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1189">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">April 1, 2011 at 10:42 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1189" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Although I don&#8217;t know definitively, I think it almost has to be less responsive because it is bounded by the callback latency. Apple probably reads the input at a lower level.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-1191"></a>
	      	
	      	<div id="li-comment-1191" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1191">

			   		<div class="comment-head">
			      	            
		                <span class="name">james</span>           
		                <span class="date">April 1, 2011 at 1:30 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1191" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle</p>
<p>Thanks for this code, I have a question about the results I&#8217;m seeing though. I&#8217;m recording in mono at 8000kHz using signed big-endian integers. The decibel reading I get in the logs always stays around 10, very occasionally dropping to 9 or 8 if I stick a pair of headphones playing some audio in front of the mic of my iPhone. Are these values expected? I seem to get much more responsiveness when using metering with Audio Queues even taking into account the latency, so think it might be a problem with my PCM format rather than your code.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1192"></a>
	      	
	      	<div id="li-comment-1192" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1192">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">April 1, 2011 at 1:37 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1192" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi James,</p>
<p>It&#8217;s the format &#8212;  reverse the endianness of the sample before reading (I&#8217;m pretty sure there are some good bit-shifting examples on Stack Overflow) and verify that it&#8217;s 16-bit and SInt16 is the appropriate kind of sample array to use.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-1193"></a>
	      	
	      	<div id="li-comment-1193" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1193">

			   		<div class="comment-head">
			      	            
		                <span class="name">james</span>           
		                <span class="date">April 1, 2011 at 2:49 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1193" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Thanks for getting back to me so quickly Halle. I&#8217;ll try reversing the endianess and see what happens. Also, I&#8217;ve read through the docs but can&#8217;t see an obvious way of determining what kind of data I should be getting in my AudioBufferList. I specify kLinearPCMFormatFlagIsBigEndian | kLinearPCMFormatFlagIsSignedInteger for the format flags, so I&#8217;m guessing that a signed integer is what I should be receiving, and it looks that way in my logging.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1219"></a>
	      	
	      	<div id="li-comment-1219" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1219">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="http://www.billyohgren.com/" class="url url" rel="ugc external nofollow">Billy</a></span>           
		                <span class="date">April 9, 2011 at 10:38 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1219" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Thanks for the tutorial, i like your blog, even though your code sometimes is a little bit to advanced for me :) but i try my best. </p>
<p>Keep up the good work! I will subscribe to your feed right now! :)</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1220"></a>
	      	
	      	<div id="li-comment-1220" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1220">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">April 9, 2011 at 10:52 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1220" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Well thank you!</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1279"></a>
	      	
	      	<div id="li-comment-1279" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1279">

			   		<div class="comment-head">
			      	            
		                <span class="name">Niran</span>           
		                <span class="date">April 24, 2011 at 6:17 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1279" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Wow, this is what I am actually looking for.</p>
<p>1. I am trying to develop a Decibel Meter, which is supposed to take the Input from the Mic</p>
<p>2. And calculate the Decibel of your voice. [ I just started this as a Fun project]</p>
<p>3. I am actually looking at Apple&#8217;s SpeakHere Example, <a href="http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html" rel="nofollow ugc">http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html</a></p>
<p>Am I in the right direction to<br>
combine your dB value converter code + speakhere example { This uses Audio Queue} then I should get the dB values?  would appreciate your response.</p>
<p>And really a big thanks for your post.<br>
Best<br>
Niran</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1280"></a>
	      	
	      	<div id="li-comment-1280" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1280">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">April 24, 2011 at 6:54 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1280" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Niran,</p>
<p>I actually saw your question about this on the iPhone SDK list and almost answered it there, but I didn&#8217;t have enough time, so I&#8217;m happy you found this post regardless.  You don&#8217;t have to do anything so complicated as combining the code &#8212; in fact you probably don&#8217;t need to use my code example above at all because you are using Audio Queue Services and they have built-in decibel metering.</p>
<p>I think that what you are seeing is that the decibel levels that your Audio Queue reports are negative numbers, is that correct?  And you want to report a positive number that represents the actual power of the signal that is hitting the mic. Am I right so far, or are the values you are getting from the Audio Queue wrong for your purposes in some other way?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1294"></a>
	      	
	      	<div id="li-comment-1294" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1294">

			   		<div class="comment-head">
			      	            
		                <span class="name">Niran</span>           
		                <span class="date">April 27, 2011 at 7:32 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1294" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle,</p>
<p>For some reason I did not get your reply thru email. Anyways THANKS A BUNCH, for answering.</p>
<p>Yes, the values that I am getting from the Audio Queue are negative. Even if I talk very loud, the value that is reported from Audio Queue is negative, which I think is not right. Thats why I wanted to see if there are any other way I can get the Decibel value.</p>
<p>Thanks<br>
Niran</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1295"></a>
	      	
	      	<div id="li-comment-1295" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1295">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">April 27, 2011 at 10:09 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1295" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>No problem.  The negative decibel number isn&#8217;t actually wrong, it&#8217;s just a particular convention for displaying power â€” it shows decibel values as a value below zero, where zero is the clipping point (point of distortion) for the recording device. Youâ€™ll see this approach on professional recording devices, and it is also the way that metering works for iPhone Audio Queues.</p>
<p>That means that the negative decibel values are not absolute decibel values that show the sound pressure level in the environment. Instead they show how many more decibels of sound pressure are possible before the recording device starts to distort (-40dB means that if there were another 40dB, the mic would clip). This is a very useful approach for audio engineering purposes because it shows you the headroom available for the signal before it becomes unusable.</p>
<p>For your purposes, if you can:</p>
<p>1) obtain the decibel level when there is absolutely no input (might be something like -80, I don&#8217;t know if this is dependent on the device &#8212; to emphasize, this is not the value with very quiet input, this is the value with no input at all, for instance with the mic disabled),<br>
2) get the absolute value of that number, and<br>
3) add the absolute value to the negative value,</p>
<p>that will change your scale into zero to positive values.</p>
<p>This doesn&#8217;t turn the iPhone into a highly-accurate decibel meter, but I think it would give you the kind of output you are expecting for a just-for-fun project.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1298"></a>
	      	
	      	<div id="li-comment-1298" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1298">

			   		<div class="comment-head">
			      	            
		                <span class="name">Niran</span>           
		                <span class="date">April 27, 2011 at 5:38 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1298" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Thanks very much. I sincerely appreciate your response/time you spent on this. I will do the app, and send you the results.</p>
<p>Halle, you rock!!</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-1322"></a>
	      	
	      	<div id="li-comment-1322" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1322">

			   		<div class="comment-head">
			      	            
		                <span class="name">Niran</span>           
		                <span class="date">May 8, 2011 at 10:22 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1322" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle,</p>
<p>How are you?<br>
I am almost done with the project.</p>
<p>I am using the following API from AudioFramework.</p>
<p>UInt32 propertySize = format.mChannelsPerFrame * sizeof (AudioQueueLevelMeterState);<br>
	AudioQueueGetProperty(<br>
						  queue,<br>
						  (AudioQueuePropertyID)kAudioQueueProperty_CurrentLevelMeterDB,<br>
						  levels,<br>
						  &amp;propertySize); </p>
<p>I am obtaining the peakPower as follows</p>
<p>return  levels[0].mPeakPower;</p>
<p>As you mentioned, when there is no MIC input at all the value is something like -120 for peakPower [ I ran the simulator as I dont know how to mute my iPodTouch]</p>
<p>As mentioned in the following post<br>
<a href="http://stackoverflow.com/questions/1281494/how-to-obtain-accurate-decibel-leve-with-cocoa" rel="nofollow ugc">http://stackoverflow.com/questions/1281494/how-to-obtain-accurate-decibel-leve-with-cocoa</a></p>
<p>The peakpower value returned when I talked very loud was 0.0.</p>
<p>If I add 120 to 0.0 thats a very loud sound isnt it?</p>
<p>So I back to square one :)</p>
<p>Thanks<br>
Niran</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1323"></a>
	      	
	      	<div id="li-comment-1323" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1323">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">May 8, 2011 at 9:09 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1323" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Niran,</p>
<p>Yup, sorry, I thought I was clear that this would just transpose your scale of quietest->clipping into positive numbers instead of negative numbers, without changing the size of the scale or what it measures.</p>
<p>Good luck with your search for a method of measuring SPL!</p>
<p>-Halle</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment even thread-even depth-1">
	    
	    	<a name="comment-1324"></a>
	      	
	      	<div id="li-comment-1324" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1324">

			   		<div class="comment-head">
			      	            
		                <span class="name">Niran</span>           
		                <span class="date">May 9, 2011 at 4:01 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1324" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Halle,</p>
<p>You were very clear about converting the Scale to positive number. </p>
<p>Its just that, it took me a long time to understand all the difference between SPL/dBFS/dB etc :)</p>
<p>Thanks a ton!!<br>
Niran</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1486"></a>
	      	
	      	<div id="li-comment-1486" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1486">

			   		<div class="comment-head">
			      	            
		                <span class="name">Tim</span>           
		                <span class="date">May 2, 2012 at 3:00 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1486" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>In the above code the condition (sampleDB == sampleDB) should always be true and unnecessary.</p>
<p>Thanks a bunch for sharing this code!</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1487"></a>
	      	
	      	<div id="li-comment-1487" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1487">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">May 2, 2012 at 8:06 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1487" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>It has a role that is explained in the comments. It&#8217;s a quick way of throwing out any NaN values that might come through for unforeseen reasons. Here&#8217;s another example for you: <a href="http://stackoverflow.com/a/2109282/119717" rel="nofollow ugc">http://stackoverflow.com/a/2109282/119717</a></p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1506"></a>
	      	
	      	<div id="li-comment-1506" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1506">

			   		<div class="comment-head">
			      	            
		                <span class="name">thom</span>           
		                <span class="date">June 6, 2012 at 1:57 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1506" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hello hale,</p>
<p>Ive readed true out all the comments. But one thing I just cant figure out. If I  want the meter to show me between 400 and 500 Hz what is the best way to get to work with this. The purpose of this is so you can tune instruments with this meter. I hope you still read this topic.</p>
<p>Thanks,<br>
Thom</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1507"></a>
	      	
	      	<div id="li-comment-1507" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1507">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">June 6, 2012 at 2:04 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1507" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hiya Thom,</p>
<p>Pitch detection is going to be a little outside of the topic of this blog post, but here is a good SO thread that should get you started and then some: <a href="http://stackoverflow.com/questions/7623166/avaudio-detect-note-pitch-etc-iphone-xcode-objective-c" rel="nofollow ugc">http://stackoverflow.com/questions/7623166/avaudio-detect-note-pitch-etc-iphone-xcode-objective-c</a></p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1712"></a>
	      	
	      	<div id="li-comment-1712" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1712">

			   		<div class="comment-head">
			      	            
		                <span class="name">Ants</span>           
		                <span class="date">August 27, 2012 at 10:39 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1712" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hey Halle,</p>
<p>A couple of questions. Firstly the if that checks for rational number and isn&#8217;t infinite</p>
<p>if((sampleDB == sampleDB) &amp;&amp; (sampleDB = -DBL_MAX)) { </p>
<p>Shouldn&#8217;t that be sampleDB != -DBL_MAX ? I seem to be getting values of DBOFFSET.</p>
<p>If I change to != then I get values out but the range is really small. I tried changing DBOFFSET to -94 however all that did was change the offset (DUH). In my case it seems to be around -9.7 with only slight variation between -10 &amp; -9.6. Is that the low pass filter that is having this effect?</p>
<p>Thanks Ants</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1713"></a>
	      	
	      	<div id="li-comment-1713" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1713">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">August 27, 2012 at 10:45 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1713" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Ants,</p>
<p>I&#8217;d guess that you&#8217;re getting unexpected results because of a different input besides a signed 16-bit integer using the full range of samples that this assumes. Since you&#8217;re getting floats out, am I correct that your input is a float value?</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-1884"></a>
	      	
	      	<div id="li-comment-1884" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1884">

			   		<div class="comment-head">
			      	            
		                <span class="name">Waruna</span>           
		                <span class="date">November 8, 2012 at 4:42 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1884" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi,<br>
Thanks for your resource full article . However when tired this example i always get -74.0 values. Do you what could be the reason for this.<br>
I used recordingCallback function instead of AudioUnitRenderCallback could this be the problem?<br>
Appreciate your answer or any suggestion.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-1885"></a>
	      	
	      	<div id="li-comment-1885" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-1885">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">November 8, 2012 at 4:56 pm</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-1885" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Waruna,</p>
<p>-74.0 means no input at all. So, you only need to troubleshoot why there is no rendered content in the buffers that are in your callback. All Audio Unit and Audio Session code has a method of error checking (including the buffer callback), so log that error checking code and it should tell you what is happening.</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment odd alt thread-odd thread-alt depth-1">
	    
	    	<a name="comment-2226"></a>
	      	
	      	<div id="li-comment-2226" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-2226">

			   		<div class="comment-head">
			      	            
		                <span class="name">Pier</span>           
		                <span class="date">January 1, 2013 at 8:26 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-2226" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Thanks for this&#8230; trying to figure it out. </p>
<p>There&#8217;s a typo here, no?<br>
if((sampleDB == sampleDB) &amp;&amp; (sampleDB = -DBL_MAX))</p>
<p>should be </p>
<p>if((sampleDB == sampleDB) &amp;&amp; (sampleDB != -DBL_MAX))</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
	                 
		<li class="comment byuser comment-author-halle-2 bypostauthor even thread-even depth-1">
	    
	    	<a name="comment-2229"></a>
	      	
	      	<div id="li-comment-2229" class="comment-container">
	      	
					                <div class="gravatar">
     						<span class="gravatar-wrap"></span>
     				</div>
	                        
		      
		   		<div class="comment-entry" id="comment-2229">

			   		<div class="comment-head">
			      	            
		                <span class="name"><a href="/" class="url url" rel="ugc">Halle</a></span>           
		                <span class="date">January 3, 2013 at 10:49 am</span>
		                <span class="perma"><a href="/2010/06/18/decibel-metering-from-an-iphone-audio-unit/#comment-2229" title="Direct link to this comment">#</a></span>
		                <span class="edit"></span>
			        		          	
					</div>
<!-- /.comment-head -->

					<p>Hi Pier,</p>
<p>You are correct, I&#8217;ve edited the code in the post. Thanks for catching that!</p>
   
												
		            <div class="reply">
		                		            </div>
<!-- /.reply -->                       
				
				</div>
<!-- /comment-entry -->
	
				<div class="fix"></div>

			</div>
<!-- /.comment-container -->
			
	</li>
<!-- #comment-## -->
		
		</ol>    

		<nav class="navigation fix">
			<div class="fl"></div>
			<div class="fr"></div>
		</nav><!-- /.navigation -->
			    
	    	
</div> <!-- /#comments_wrap -->

  
        
		</section><!-- #main -->
		
		
        	
<aside id="sidebar" class="col-right">

	
	    <div class="primary">
		
		<div id="recent-posts-2" class="widget widget_recent_entries">
		<h3>Recent Posts</h3>
		<ul>
											<li>
					<a href="/2016/10/22/swift-3-support-is-now-complete/">Swift 3 support is now complete!</a>
									</li>
											<li>
					<a href="/2016/10/21/swift-3-support-part-2-tutorials/">Swift 3 support part 2: tutorials!</a>
									</li>
											<li>
					<a href="/2016/10/20/swift-3-support-part-1-sample-app/">Swift 3 support part 1: sample app</a>
									</li>
					</ul>

		</div>		           
	</div>        
	   
	
	 
	
</aside><!-- /#sidebar -->

    </div>
<!-- #content -->
		
		<footer id="footer" class="col-full">
	
			<div id="copyright" class="col-left">
							<p>Politepix &copy; 2024. All Rights Reserved.</p>
						</div>
	
			<div id="credit" class="col-right">
	        <div style="text-align:right;line-height:1.3em">OpenEarsÂ® is a registered trademark of Politepix<br>AllHoursÂ® is a registered trademark of Politepix<br>The Politepix site uses cookies in order to understand how the website is used by visitors and in order to enable some required functionality. You can learn all about which cookies we use on the <a href="/about/">About</a> page, as well as everything about our privacy policy.<br>
<a href="https://twitter.com/Politepix" rel="me">TWITTER</a> | <a href="/contact" id="impressumlink">CONTACT POLITEPIX</a><a href="/about" id="impressumlink"> | IMPRESSUM | ABOUT | LEGAL | IMPRINT</a>
</div>			</div>
	<a rel="me" href="https://mastodon.social/@Halle">M</a>
		</footer><!-- /#footer  -->

</div>
<!-- /#wrapper -->

<!-- Consent Management powered by Complianz | GDPR/CCPA Cookie Consent https://wordpress.org/plugins/complianz-gdpr -->
<div id="cmplz-cookiebanner-container">
<div class="cmplz-cookiebanner cmplz-hidden banner-1 bottom-right-view-preferences optin cmplz-bottom-right cmplz-categories-type-view-preferences" aria-modal="true" data-nosnippet="true" role="dialog" aria-live="polite" aria-labelledby="cmplz-header-1-optin" aria-describedby="cmplz-message-1-optin">
	<div class="cmplz-header">
		<div class="cmplz-logo"></div>
		<div class="cmplz-title" id="cmplz-header-1-optin">Manage Cookie Consent</div>
		<div class="cmplz-close" tabindex="0" role="button" aria-label="Close dialog">
			<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" class="svg-inline--fa fa-times fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>
		</div>
	</div>

	<div class="cmplz-divider cmplz-divider-header"></div>
	<div class="cmplz-body">
		<div class="cmplz-message" id="cmplz-message-1-optin">To provide the best experiences, we use technologies like cookies to store and/or access device information. Consenting to these technologies will allow us to process data such as browsing behavior or unique IDs on this site. Not consenting or withdrawing consent, may adversely affect certain features and functions.</div>
		<!-- categories start -->
		<div class="cmplz-categories">
			<details class="cmplz-category cmplz-functional">
				<summary>
						<span class="cmplz-category-header">
							<span class="cmplz-category-title">Functional</span>
							<span class="cmplz-always-active">
								<span class="cmplz-banner-checkbox">
									<input type="checkbox" id="cmplz-functional-optin" data-category="cmplz_functional" class="cmplz-consent-checkbox cmplz-functional" size="40" value="1">
									<label class="cmplz-label" for="cmplz-functional-optin" tabindex="0"><span class="screen-reader-text">Functional</span></label>
								</span>
								Always active							</span>
							<span class="cmplz-icon cmplz-open">
								<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" height="18"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg>
							</span>
						</span>
				</summary>
				<div class="cmplz-description">
					<span class="cmplz-description-functional">The technical storage or access is strictly necessary for the legitimate purpose of enabling the use of a specific service explicitly requested by the subscriber or user, or for the sole purpose of carrying out the transmission of a communication over an electronic communications network.</span>
				</div>
			</details>

			<details class="cmplz-category cmplz-preferences">
				<summary>
						<span class="cmplz-category-header">
							<span class="cmplz-category-title">Preferences</span>
							<span class="cmplz-banner-checkbox">
								<input type="checkbox" id="cmplz-preferences-optin" data-category="cmplz_preferences" class="cmplz-consent-checkbox cmplz-preferences" size="40" value="1">
								<label class="cmplz-label" for="cmplz-preferences-optin" tabindex="0"><span class="screen-reader-text">Preferences</span></label>
							</span>
							<span class="cmplz-icon cmplz-open">
								<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" height="18"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg>
							</span>
						</span>
				</summary>
				<div class="cmplz-description">
					<span class="cmplz-description-preferences">The technical storage or access is necessary for the legitimate purpose of storing preferences that are not requested by the subscriber or user.</span>
				</div>
			</details>

			<details class="cmplz-category cmplz-statistics">
				<summary>
						<span class="cmplz-category-header">
							<span class="cmplz-category-title">Statistics</span>
							<span class="cmplz-banner-checkbox">
								<input type="checkbox" id="cmplz-statistics-optin" data-category="cmplz_statistics" class="cmplz-consent-checkbox cmplz-statistics" size="40" value="1">
								<label class="cmplz-label" for="cmplz-statistics-optin" tabindex="0"><span class="screen-reader-text">Statistics</span></label>
							</span>
							<span class="cmplz-icon cmplz-open">
								<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" height="18"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg>
							</span>
						</span>
				</summary>
				<div class="cmplz-description">
					<span class="cmplz-description-statistics">The technical storage or access that is used exclusively for statistical purposes.</span>
					<span class="cmplz-description-statistics-anonymous">The technical storage or access that is used exclusively for anonymous statistical purposes. Without a subpoena, voluntary compliance on the part of your Internet Service Provider, or additional records from a third party, information stored or retrieved for this purpose alone cannot usually be used to identify you.</span>
				</div>
			</details>
			<details class="cmplz-category cmplz-marketing">
				<summary>
						<span class="cmplz-category-header">
							<span class="cmplz-category-title">Marketing</span>
							<span class="cmplz-banner-checkbox">
								<input type="checkbox" id="cmplz-marketing-optin" data-category="cmplz_marketing" class="cmplz-consent-checkbox cmplz-marketing" size="40" value="1">
								<label class="cmplz-label" for="cmplz-marketing-optin" tabindex="0"><span class="screen-reader-text">Marketing</span></label>
							</span>
							<span class="cmplz-icon cmplz-open">
								<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" height="18"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg>
							</span>
						</span>
				</summary>
				<div class="cmplz-description">
					<span class="cmplz-description-marketing">The technical storage or access is required to create user profiles to send advertising, or to track the user on a website or across several websites for similar marketing purposes.</span>
				</div>
			</details>
		</div>
<!-- categories end -->
			</div>

	<div class="cmplz-links cmplz-information">
		<a class="cmplz-link cmplz-manage-options cookie-statement" href="#" data-relative_url="#cmplz-manage-consent-container">Manage options</a>
		<a class="cmplz-link cmplz-manage-third-parties cookie-statement" href="#" data-relative_url="#cmplz-cookies-overview">Manage services</a>
		<a class="cmplz-link cmplz-manage-vendors tcf cookie-statement" href="#" data-relative_url="#cmplz-tcf-wrapper">Manage {vendor_count} vendors</a>
		<a class="cmplz-link cmplz-external cmplz-read-more-purposes tcf" target="_blank" rel="noopener noreferrer nofollow" href="https://cookiedatabase.org/tcf/purposes/">Read more about these purposes</a>
			</div>

	<div class="cmplz-divider cmplz-footer"></div>

	<div class="cmplz-buttons">
		<button class="cmplz-btn cmplz-accept">Accept</button>
		<button class="cmplz-btn cmplz-deny">Deny</button>
		<button class="cmplz-btn cmplz-view-preferences">View preferences</button>
		<button class="cmplz-btn cmplz-save-preferences">Save preferences</button>
		<a class="cmplz-btn cmplz-manage-options tcf cookie-statement" href="#" data-relative_url="#cmplz-manage-consent-container">View preferences</a>
			</div>

	<div class="cmplz-links cmplz-documents">
		<a class="cmplz-link cookie-statement" href="#" data-relative_url="">{title}</a>
		<a class="cmplz-link privacy-statement" href="#" data-relative_url="">{title}</a>
		<a class="cmplz-link impressum" href="#" data-relative_url="">{title}</a>
			</div>

</div>
</div>
					<div id="cmplz-manage-consent" data-nosnippet="true">
<button class="cmplz-btn cmplz-hidden cmplz-manage-consent manage-consent-1">Manage consent</button>

</div>
<!--[if lt IE 9]>
<script src="https://www.politepix.com/wp-content//themes/pixelpress/includes/js/respond-IE.js"></script>
<![endif]-->
			<script>jQuery(document).ready(function(){
					jQuery('.images a').attr('rel', 'prettyPhoto[product-gallery]');
				});</script>
			<script type="text/javascript">(function () {
			var c = document.body.className;
			c = c.replace(/woocommerce-no-js/, 'woocommerce-js');
			document.body.className = c;
		})();</script>
	<link rel="stylesheet" id="wc-blocks-style-css" href="https://c0.wp.com/p/woocommerce/8.8.2/assets/client/blocks/wc-blocks.css" type="text/css" media="all">
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/accounting/accounting.min.js" id="accounting-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/jquery/ui/core.min.js" id="jquery-ui-core-js"></script>
<script type="text/javascript" src="https://c0.wp.com/c/6.5.2/wp-includes/js/jquery/ui/datepicker.min.js" id="jquery-ui-datepicker-js"></script>
<script type="text/javascript" id="jquery-ui-datepicker-js-after">
/* <![CDATA[ */
jQuery(function(jQuery){jQuery.datepicker.setDefaults({"closeText":"Close","currentText":"Today","monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"nextText":"Next","prevText":"Previous","dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayNamesMin":["S","M","T","W","T","F","S"],"dateFormat":"MM d, yy","firstDay":1,"isRTL":false});});
/* ]]> */
</script>
<script type="text/javascript" id="woocommerce-addons-js-extra">
/* <![CDATA[ */
var woocommerce_addons_params = {"price_display_suffix":"","tax_enabled":"1","price_include_tax":"","display_include_tax":"","ajax_url":"\/wp-admin\/admin-ajax.php","i18n_validation_required_select":"Please choose an option.","i18n_validation_required_input":"Please enter some text in this field.","i18n_validation_required_number":"Please enter a number in this field.","i18n_validation_required_file":"Please upload a file.","i18n_validation_letters_only":"Please enter letters only.","i18n_validation_numbers_only":"Please enter numbers only.","i18n_validation_letters_and_numbers_only":"Please enter letters and numbers only.","i18n_validation_email_only":"Please enter a valid email address.","i18n_validation_min_characters":"Please enter at least %c characters.","i18n_validation_max_characters":"Please enter up to %c characters.","i18n_validation_min_number":"Please enter %c or more.","i18n_validation_max_number":"Please enter %c or less.","i18n_sub_total":"Subtotal","i18n_remaining":"<span><\/span> characters remaining","currency_format_num_decimals":"2","currency_format_symbol":"â‚¬","currency_format_decimal_sep":".","currency_format_thousand_sep":",","trim_trailing_zeros":"","is_bookings":"","trim_user_input_characters":"1000","quantity_symbol":"x ","datepicker_class":"wc_pao_datepicker","datepicker_date_format":"MM d, yy","gmt_offset":"-2","date_input_timezone_reference":"default","currency_format":"%s%v"};
/* ]]> */
</script>
<script type="text/javascript" src="https://www.politepix.com/wp-content/plugins/woocommerce-product-addons/assets/js/frontend/addons.min.js?ver=6.8.2" id="woocommerce-addons-js" defer data-wp-strategy="defer"></script>
<script type="text/javascript" src="https://www.politepix.com/wp-content/plugins/jetpack/jetpack_vendor/automattic/jetpack-image-cdn/dist/image-cdn.js?minify=false&amp;ver=132249e245926ae3e188" id="jetpack-photon-js"></script>
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/sourcebuster/sourcebuster.min.js" id="sourcebuster-js-js"></script>
<script type="text/javascript" id="wc-order-attribution-js-extra">
/* <![CDATA[ */
var wc_order_attribution = {"params":{"lifetime":1.0e-5,"session":30,"ajaxurl":"\/wp-admin\/admin-ajax.php","prefix":"wc_order_attribution_","allowTracking":true},"fields":{"source_type":"current.typ","referrer":"current_add.rf","utm_campaign":"current.cmp","utm_source":"current.src","utm_medium":"current.mdm","utm_content":"current.cnt","utm_id":"current.id","utm_term":"current.trm","session_entry":"current_add.ep","session_start_time":"current_add.fd","session_pages":"session.pgs","session_count":"udata.vst","user_agent":"udata.uag"}};
/* ]]> */
</script>
<script type="text/javascript" src="https://c0.wp.com/p/woocommerce/8.8.2/assets/js/frontend/order-attribution.min.js" id="wc-order-attribution-js"></script>
<script data-service="jetpack-statistics" data-category="statistics" type="text/plain" data-cmplz-src="https://stats.wp.com/e-202417.js" id="jetpack-stats-js" data-wp-strategy="defer"></script>
<script type="text/javascript" id="jetpack-stats-js-after">
/* <![CDATA[ */
_stq = window._stq || [];
_stq.push([ "view", JSON.parse("{\"v\":\"ext\",\"blog\":\"206848719\",\"post\":\"477\",\"tz\":\"2\",\"srv\":\"www.politepix.com\",\"j\":\"1:13.3.1\"}") ]);
_stq.push([ "clickTrackerInit", "206848719", "477" ]);
/* ]]> */
</script>
<script type="text/javascript" id="cmplz-cookiebanner-js-extra">
/* <![CDATA[ */
var complianz = {"prefix":"cmplz_","user_banner_id":"1","set_cookies":[],"block_ajax_content":"","banner_version":"18","version":"7.0.4","store_consent":"","do_not_track_enabled":"1","consenttype":"optin","region":"eu","geoip":"","dismiss_timeout":"","disable_cookiebanner":"","soft_cookiewall":"","dismiss_on_scroll":"","cookie_expiry":"365","url":"\/wp-json\/complianz\/v1\/","locale":"lang=en&locale=en_US","set_cookies_on_root":"","cookie_domain":"","current_policy_id":"16","cookie_path":"\/","categories":{"statistics":"statistics","marketing":"marketing"},"tcf_active":"","placeholdertext":"Click to accept {category} cookies and enable this content","css_file":"\/wp-content\/uploads\/complianz\/css\/banner-{banner_id}-{type}.css?v=18","page_links":{"eu":{"cookie-statement":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"},"privacy-statement":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"},"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}},"us":{"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}},"uk":{"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}},"ca":{"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}},"au":{"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}},"za":{"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}},"br":{"impressum":{"title":"About &#038; Impressum &#038; Privacy Policy","url":"\/about\/"}}},"tm_categories":"","forceEnableStats":"","preview":"","clean_cookies":"","aria_label":"Click to accept {category} cookies and enable this content"};
/* ]]> */
</script>
<script defer type="text/javascript" src="https://www.politepix.com/wp-content/plugins/complianz-gdpr/cookiebanner/js/complianz.min.js?ver=1710283454" id="cmplz-cookiebanner-js"></script>
</body>
</html>